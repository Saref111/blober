{"version":3,"file":"commonHelpers.js","sources":["../src/js/helpers.ts","../src/js/constants.ts","../src/js/localStorageController.ts","../src/js/blober.ts","../src/js/exportSVG.ts","../src/js/configBuilder.ts","../src/js/controls/handlerSetters.ts","../src/js/controls/filedsetHandlers.ts","../src/js/controls/formHandler.ts","../src/js/controls/backgroundStyle.ts","../src/main.ts"],"sourcesContent":["import { TransformationType } from \"./blober\";\n\nexport const generateHexColor = (): string => {\n    let color = \"#\";\n    for (let i = 0; i < 3; i++) {\n        let component = Math.floor(Math.random() * 256).toString(16);\n        color += component.padStart(2, '0');\n    }\n    return color;\n}\n\nexport const getRandomInt = (min: number, max: number) => Math.floor(Math.random() * (max - min + 1)) + min;\n\nexport const removeRandomFromArray = <T>(arr: T[]): T => {\n    const index = getRandomInt(0, arr.length - 1);\n    return arr.splice(index, 1)[0];\n};\n\nexport const getUniqueId = () => Date.now().toString(36) + Math.random().toString(36).slice(2);\n\nexport const generateTransformType = (): TransformationType => \"translate\";\n","export const SVG_SIZE = 650;\n\nexport const FILTER = `<defs>\n                    <filter id=\"filter\" x=\"-100\" y=\"-100\" width=\"1750\" height=\"1750\"\n                        filterUnits=\"userSpaceOnUse\" col4or-interpolation-filters=\"sRGB\">\n                        <feGaussianBlur stdDeviation=\"65.5\" result=\"effect1_foregroundBlur_32_5690\" />\n                    </filter>                   \n                </defs>`;\n\n\n\nexport const DEFAULT_SCREEN = ` <circle\n                            cx=\"250\"\n                            cy=\"250\"\n                            r=\"200\"\n                            fill=\"none\"\n                            stroke=\"black\"\n                            stroke-width=\"2\"\n                        />\n                        <text\n                            x=\"50%\"\n                            y=\"50%\"\n                            text-anchor=\"middle\"\n                            font-size=\"30\"\n                            fill=\"black\"\n                        >\n                            Hello, Blob!\n                        </text>`;\n","import { BlobConfig } from './blober';\n\nclass LocalStorageController<T> {\n  protected storage = localStorage;\n\n  protected entities: Set<T> = new Set();\n  protected bgColor: string;\n  protected metakey: string;\n\n  constructor(metakey: string) {\n    this.metakey = metakey;\n    const current = JSON.parse(this.storage.getItem(this.metakey) || '[]');\n    this.entities = new Set(current);\n\n    this.bgColor = localStorage.getItem(`${metakey}_bgColor`) || '#f3dddd';\n  }\n\n  protected save() {\n    this.storage.setItem(\n      this.metakey,\n      JSON.stringify(Array.from(this.entities))\n    );\n    this.storage.setItem(`${this.metakey}_bgColor`, this.bgColor);\n    document.dispatchEvent(new Event('update'));\n  }\n\n  setBGColor(color: string) {\n    this.bgColor = color;\n    this.storage.setItem(`${this.metakey}_bgColor`, color);\n    document.dispatchEvent(new Event('update'));\n  }\n  \n  clear() {\n    this.entities.clear();\n    this.storage.removeItem(this.metakey);\n    \n    this.bgColor = '#f3dddd';\n    this.storage.removeItem(`${this.metakey}_bgColor`);\n    document.dispatchEvent(new Event('update'));\n  }\n\n  getBGColor() {\n    return this.bgColor;\n  }\n\n  addEntity(key: T) {\n    this.entities.add(key);\n    this.save();\n  }\n\n  removeEntity(key: T) {\n    this.entities.delete(key);\n    this.save();\n  }\n\n  has(id: string) {\n    return Array.from(this.entities).some((entity: any) => entity.id === id);\n  }\n\n  getEntities() {\n    return Array.from(this.entities);\n  }\n\n  getEntitiesCount() {\n    return this.entities.size;\n  }\n\n  findEntity(predicate: (value: T, value2: number, set: Array<T>) => unknown) {\n    return Array.from(this.entities).find(predicate);\n  }\n\n  updateEntity(prevValue: T, newValue: T) {\n    if (this.entities.has(prevValue)) {\n      const entities = Array.from(this.entities);\n      const index = entities.findIndex((entity) => entity === prevValue);\n      entities[index] = newValue;\n      this.entities = new Set(entities);\n\n      this.save();\n    }\n  }\n\n  moveEntity(entity: T, newIndex: number) {\n    const entities = Array.from(this.entities);\n    const newEntities = entities.filter((e) => e !== entity);\n    newEntities.splice(newIndex, 0, entity);\n    this.entities = new Set(newEntities);\n    this.save();\n  }\n}\n\nexport const blobStorage = new LocalStorageController<BlobConfig>(\n  '__blobConfigs__'\n);\n","import generator from 'blobshape';\nimport { generateHexColor } from './helpers';\nimport { SVG_SIZE, DEFAULT_SCREEN, FILTER } from './constants';\nimport { blobStorage } from './localStorageController';\n\nexport type TransformationType =\n  | 'translate'\n  | 'rotate'\n  | 'scale'\n  | 'skewX'\n  | 'skewY';\n\ntype Transformation = {\n  type: TransformationType;\n  args: number[];\n};\n\ntype AnimationParams = {\n  play: boolean;\n  speed: number;\n};\n\nexport type BlobConfig = {\n  color: string;\n  id: string;\n  transform: Transformation;\n  filterId: string;\n  seed: number;\n  animation: AnimationParams;\n};\n\nconst getPathString = (cfg: BlobConfig) => {\n  const path = generator({\n    size: SVG_SIZE,\n    growth: 1,\n    seed: cfg.seed.toString(),\n  }).path;\n  const animationPaths = [\n    generator({\n      size: SVG_SIZE,\n      growth: 1.5,\n      seed: (cfg.seed + 1).toString(),\n    }).path,\n    generator({\n      size: SVG_SIZE,\n      growth: 2,\n      seed: (cfg.seed + 2).toString(),\n    }).path,\n  ];\n  return `<g style=\"--color: ${cfg.color};\" transform=\"${\n    cfg.transform.type\n  }(${cfg.transform.args.join(', ')})\" filter=\"url(#${cfg.filterId})\" id=\"${\n    cfg.id\n  }\">\n    <path d=\"${path}\" fill=\"${cfg.color}\" >\n        ${\n          cfg.animation.play &&\n          `<animate \n              attributeName=\"d\" \n              dur=\"${cfg.animation.speed}s\" \n              repeatCount=\"indefinite\"\n              keyTimes=\"0;0.33;0.67;1\" \n              values=\"${path};${animationPaths.join(';')};${path}\" \n          />`\n        }\n    </path>\n  </g>`;\n};\n\nconst handleSVGGroup = (blobConfig: BlobConfig, blobSVGString: string) => {\n  const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n  svg.innerHTML = blobSVGString;\n  const group = svg.querySelector('g') as SVGElement;\n\n  let offsetX = blobConfig.transform.args[0];\n  let offsetY = blobConfig.transform.args[1];\n  let currentX = 0;\n  let currentY = 0;\n\n  const move = (event: MouseEvent) => {\n    const x = event.clientX - offsetX;\n    const y = event.clientY - offsetY;\n    currentX = x;\n    currentY = y;\n    group.setAttribute('transform', `translate(${x} ${y})`);\n  };\n\n  group.addEventListener('mousedown', (event) => {\n    event.stopPropagation();\n    offsetX = event.clientX - offsetX;\n    offsetY = event.clientY - offsetY;\n    document.addEventListener('mousemove', move);\n    document.addEventListener('mouseup', () => {\n      document.removeEventListener('mousemove', move);\n\n      blobStorage.updateEntity(blobConfig, {\n        ...blobConfig,\n        transform: {\n          type: 'translate',\n          args: [currentX, currentY],\n        },\n      });\n    });\n  });\n\n  group.addEventListener('mouseover', () => {\n    const fieldset = document.getElementById(`blob_${blobConfig.id}`);\n    if (!fieldset) return;\n    fieldset.classList.add('blob-fieldset--hover');\n  });\n  group.addEventListener('mouseout', () => {\n    const fieldset = document.getElementById(`blob_${blobConfig.id}`);\n    if (!fieldset) return;\n    fieldset.classList.remove('blob-fieldset--hover');\n  });\n\n  return group;\n};\n\nconst generateBlob = (config: BlobConfig, svg: HTMLElement) => {\n  if (!config.color) {\n    config.color = generateHexColor();\n  }\n\n  const blob = handleSVGGroup(config, getPathString(config));\n\n  svg.insertAdjacentElement('afterbegin', blob);\n};\n\nexport const generateBlobs = () => {\n  const blobConfigs = blobStorage.getEntities();\n  const bgColor = blobStorage.getBGColor();\n  const screen = document.querySelector('#main-screen') as HTMLElement;\n  const bgScreen = document.querySelector('#bg-color-screen') as HTMLElement;\n  \n  bgScreen.setAttribute('fill', bgColor);\n  if (!blobConfigs.length) {\n    screen.innerHTML = DEFAULT_SCREEN;\n    return;\n  }\n  screen.innerHTML = '';\n  screen.insertAdjacentHTML('beforeend', FILTER);\n\n  blobConfigs.forEach((config) => {\n    generateBlob(config, screen);\n  });\n};\n","import svg64 from \"svg64\";\n\nexport const handleExportSVG = () => {\n    const svg = document.querySelector(\".screen\") as SVGSVGElement;\n    const loadSVGButton = document.querySelector(\"#load-svg\") as HTMLButtonElement;\n    const copyAsTextButton = document.querySelector(\"#copy-svg\") as HTMLButtonElement;\n    const copyAsBase64Button = document.querySelector(\"#copy-svg-as-base64\") as HTMLButtonElement;\n    \n    copyAsBase64Button.addEventListener(\"click\", () => {\n        const svgString = new XMLSerializer().serializeToString(svg);\n        const base64 = svg64(svgString);\n        navigator.clipboard.writeText(base64);\n    });\n\n    copyAsTextButton.addEventListener(\"click\", () => {\n        const svgString = new XMLSerializer().serializeToString(svg);\n        navigator.clipboard.writeText(svgString);\n    });\n    \n    loadSVGButton.addEventListener(\"click\", () => {\n        const svgString = new XMLSerializer().serializeToString(svg);\n        const blob = new Blob([svgString], { type: \"image/svg+xml\" });\n        const url = URL.createObjectURL(blob);\n        const a = document.createElement(\"a\");\n        a.href = url;\n        a.download = \"blobs.svg\";\n        a.click();\n        URL.revokeObjectURL(url);\n    });\n};\n","import { BlobConfig } from './blober';\nimport { generateHexColor, generateTransformType, getRandomInt, getUniqueId } from './helpers';\n\nexport const generateNewBlobConfig = (): BlobConfig => {\n    const seed  = Math.floor(Math.random() * 1000_000_000);\n  return {\n    id: getUniqueId(),\n    transform: {\n      type: generateTransformType(),\n      args: [getRandomInt(-300, 300), getRandomInt(-300, 300)],\n    },\n    filterId: 'filter',\n    color: generateHexColor(),\n    animation: {\n      play: true,\n      speed: 10,\n    },\n    seed,\n  };\n};\n\n","import { BlobConfig } from '../blober';\nimport { blobStorage } from '../localStorageController';\n\ntype Events = Event | DragEvent | MouseEvent | KeyboardEvent;\ntype HandlersMap = Record<string, (event: Events) => void>;\n\nconst handlerCash = new Map<string, HandlersMap>();\n\nconst removeBlob = (id: string) => {\n  const blob = blobStorage.findEntity((blob: BlobConfig) => blob.id === id);\n  if (!blob) {\n    return;\n  }\n  blobStorage.removeEntity(blob);\n};\n\nconst onFieldsetDrop = (event: DragEvent, id: string) => {\n  event.preventDefault();\n  event.stopPropagation();\n\n  const draggedId = event.dataTransfer?.getData('text/plain');\n  if (draggedId === id) {\n    return;\n  }\n  const draggedBlob = blobStorage.findEntity(\n    (blob: BlobConfig) => blob.id === draggedId\n  );\n  const targetBlob = blobStorage.findEntity(\n    (blob: BlobConfig) => blob.id === id\n  );\n  if (!draggedBlob || !targetBlob) {\n    return;\n  }\n  blobStorage.moveEntity(\n    draggedBlob,\n    blobStorage.getEntities().indexOf(targetBlob)\n  );\n};\n\nconst getFieldSetId = (fieldset: HTMLFieldSetElement) => {\n  return fieldset.id.split('_')[1];\n};\n\nexport const setMouseOver = (fieldset: HTMLFieldSetElement) => {\n  let currentFieldsetCash = handlerCash.get(getFieldSetId(fieldset));\n  if (currentFieldsetCash?.mouseOverHandler) {\n    fieldset.removeEventListener(\n      'mouseover',\n      currentFieldsetCash.mouseOverHandler\n    );\n  }\n  if (currentFieldsetCash?.mouseOutHandler) {\n    fieldset.removeEventListener(\n      'mouseout',\n      currentFieldsetCash.mouseOutHandler\n    );\n  }\n\n  handlerCash.set(getFieldSetId(fieldset), {\n    mouseOverHandler: () => {\n      const [_, id] = fieldset.id.split('_');\n      const group = document.getElementById(`${id}`);\n      if (!group) return;\n      group.classList.add('hover');\n    },\n    mouseOutHandler: () => {\n      const [_, id] = fieldset.id.split('_');\n      const group = document.getElementById(`${id}`);\n      if (!group) return;\n      group.classList.remove('hover');\n    },\n  });\n\n  currentFieldsetCash = handlerCash.get(getFieldSetId(fieldset));\n  if (!currentFieldsetCash) return;\n\n  fieldset.addEventListener('mouseover', currentFieldsetCash.mouseOverHandler);\n  fieldset.addEventListener('mouseout', currentFieldsetCash.mouseOutHandler);\n};\n\nexport const setDragNDropHandlers = (\n  fieldset: HTMLFieldSetElement,\n  id: string\n) => {\n  let currentFieldsetCash = handlerCash.get(getFieldSetId(fieldset));\n  if (currentFieldsetCash?.dragStartHandler) {\n    fieldset.removeEventListener(\n      'dragstart',\n      currentFieldsetCash.dragStartHandler\n    );\n  }\n\n  if (currentFieldsetCash?.dragOverHandler) {\n    fieldset.removeEventListener(\n      'dragover',\n      currentFieldsetCash.dragOverHandler\n    );\n  }\n\n  if (currentFieldsetCash?.dropHandler) {\n    fieldset.removeEventListener('drop', currentFieldsetCash.dropHandler);\n  }\n\n  handlerCash.set(getFieldSetId(fieldset), {\n    dragStartHandler: (event) => {\n      if (!('dataTransfer' in event)) return;\n      event.dataTransfer?.setData('text/plain', id);\n    },\n    dragOverHandler: (event) => {\n      event.preventDefault();\n      event.stopPropagation();\n    },\n    dropHandler: (e) => onFieldsetDrop(e as DragEvent, id),\n  });\n\n  currentFieldsetCash = handlerCash.get(getFieldSetId(fieldset));\n  if (!currentFieldsetCash) return;\n\n  fieldset.addEventListener('dragstart', currentFieldsetCash.dragStartHandler);\n  fieldset.addEventListener('drop', currentFieldsetCash.dropHandler);\n  fieldset.addEventListener('dragover', currentFieldsetCash.dragOverHandler);\n};\n\nexport const setFieldsetAttrs = (\n  fieldset: HTMLFieldSetElement,\n  id: string,\n  color: string\n) => {\n  fieldset.setAttribute('id', `blob_${id}`);\n  fieldset.setAttribute('draggable', `true`);\n  fieldset.setAttribute('style', `--color: ${color};`);\n  fieldset.classList.add('blob-fieldset');\n};\n\nexport const setRemoveButton = (fieldset: HTMLFieldSetElement, id: string) => {\n  const removeButton = fieldset.querySelector(\n    '.remove-blob'\n  ) as HTMLButtonElement;\n  let currentFieldsetCash = handlerCash.get(getFieldSetId(fieldset));\n  if (currentFieldsetCash?.removeHandler) {\n    removeButton.removeEventListener(\n      'click',\n      currentFieldsetCash.removeHandler\n    );\n  }\n\n  handlerCash.set(getFieldSetId(fieldset), {\n    removeHandler: () => {\n      removeBlob(id);\n    },\n  });\n\n  currentFieldsetCash = handlerCash.get(getFieldSetId(fieldset));\n  if (!currentFieldsetCash) return;\n  removeButton.addEventListener('click', currentFieldsetCash.removeHandler);\n};\n","import { BlobConfig } from '../blober';\nimport {\n  setDragNDropHandlers,\n  setFieldsetAttrs,\n  setMouseOver,\n  setRemoveButton,\n} from './handlerSetters';\n\nexport const getFieldset = ({ id, color, seed, animation }: BlobConfig) => {\n  const fieldset = document.createElement('fieldset');\n  setFieldsetAttrs(fieldset, id, color);\n  fieldset.innerHTML = `\n        <label>\n            <span>Color:</span>\n            <input value=\"${color}\" type=\"color\" name=\"color_${id}\" id=\"color_${id}\" />\n        </label>\n        <label>\n          <span>Seed:</span>\n          <input value=\"${seed}\" type=\"number\" name=\"seed_${id}\" id=\"seed_${id}\" />\n        </label>\n        <details>\n          <summary>Animation</summary>\n          <label>\n            <span>Play:</span>\n            <input ${\n              animation.play && 'checked'\n            } type=\"checkbox\" name=\"animation_${id}\" id=\"animation_${id}\" />\n          </label>\n          <label>\n            <span>Speed (s):</span>\n            <input value=\"${\n              animation.speed\n            }\" type=\"number\" name=\"speed_${id}\" id=\"speed_${id}\" />\n          </label>\n        </details>\n        <button type=\"button\" class=\"remove-blob\">Remove</button>\n    `;\n\n  setRemoveButton(fieldset, id);\n  setMouseOver(fieldset);\n  setDragNDropHandlers(fieldset, id);\n  return fieldset;\n};\n","import { BlobConfig } from '../blober';\nimport { blobStorage } from '../localStorageController';\nimport { generateNewBlobConfig } from '../configBuilder';\nimport { getFieldset } from './filedsetHandlers';\n\nconst DEFAULT_FROM_ELEMENTS_AMOUNT = 4;\n\nconst updateBlob = (e: Event) => {\n  const target = e.target as HTMLInputElement;\n  const [type, id] = target.name.split('_');\n  const blob = blobStorage.findEntity((blob: BlobConfig) => blob.id === id);\n  if (!blob) {\n    return;\n  }\n  let updatedBlob = { ...blob };\n  if (type === 'color') {\n    updatedBlob.color = target.value;\n  } else if (type === 'seed') {\n    updatedBlob.seed = parseInt(target.value, 10);\n  } else if (type === 'animation') {\n    updatedBlob.animation.play = target.checked;\n  } else if (type === 'speed') {\n    updatedBlob.animation.speed = parseInt(target.value, 10);\n  }\n  blobStorage.updateEntity(blob, updatedBlob);\n};\n\n\nexport const formHandler = (form: HTMLFormElement) => {\n  const addBlobButton = form.querySelector('#add-blob') as HTMLButtonElement;\n\n  const updateView = (e?: Event) => {\n    e?.preventDefault();\n    const blobs = blobStorage.getEntities();\n    const fieldsets = form.querySelectorAll(\n      '.blob-fieldset'\n    ) as NodeListOf<HTMLFieldSetElement>;\n\n    if (!blobs.length) {\n      fieldsets.forEach((el) => el.remove());\n      return;\n    }\n\n    if (!fieldsets.length) {\n      blobs.forEach((blob) => {\n        form.insertAdjacentElement('beforeend', getFieldset(blob));\n      });\n      return;\n    }\n\n    fieldsets.forEach((el, i) => {\n      const id = el.id.split('_')[1];\n      const blob = blobs.find((blob) => blob.id === id);\n      if (!blob) {\n        el.remove();\n        return;\n      }\n    });\n\n    blobs.forEach((blob, i, a) => {\n      const id = blob.id;\n      const el = form.querySelector(`#blob_${id}`) as HTMLFieldSetElement;\n\n      if (!el) {\n        form.insertAdjacentElement('beforeend', getFieldset(blob));\n        return;\n      }\n\n      const currentIndex = Array.from(form.children).indexOf(el);\n      \n      if (i !== currentIndex - DEFAULT_FROM_ELEMENTS_AMOUNT) {\n        form.insertBefore(el, form.children[i + DEFAULT_FROM_ELEMENTS_AMOUNT]);\n      } \n    });\n  };\n\n  addBlobButton.addEventListener('click', () => {\n    const newBlobConfig: BlobConfig = generateNewBlobConfig();\n    blobStorage.addEntity(newBlobConfig);\n  });\n\n  form.addEventListener('reset', (e) => {\n    e.preventDefault();\n    form.querySelectorAll('.blob-fieldset').forEach((el) => el.remove());\n    blobStorage.clear();\n  });\n  document.addEventListener('update', updateView);\n  form.addEventListener('input', updateBlob);\n  updateView();\n};\n","import { blobStorage } from \"../localStorageController\";\n\nexport const handleBGColorChange = () => {\n  const colorInput = document.getElementById('bg-color') as HTMLInputElement;\n  colorInput.value = blobStorage.getBGColor();\n\n  colorInput.addEventListener('input', () => {\n    blobStorage.setBGColor(colorInput.value);\n  });\n\n  document.addEventListener('update', () => {\n    colorInput.value = blobStorage.getBGColor();\n  });\n};\n","import { generateBlobs } from \"./js/blober.js\";\nimport { handleExportSVG } from \"./js/exportSVG.js\";\nimport { formHandler } from \"./js/controls/formHandler.js\";\nimport { handleBGColorChange } from \"./js/controls/backgroundStyle.js\";\n\nconst form = document.querySelector(\".controls__form\") as HTMLFormElement;\nhandleExportSVG();\n\nformHandler(form);\n\ndocument.addEventListener(\"update\", () => {\n    generateBlobs();\n});\ngenerateBlobs();\nhandleBGColorChange();\n"],"names":["generateHexColor","color","i","component","getRandomInt","min","max","getUniqueId","generateTransformType","SVG_SIZE","FILTER","DEFAULT_SCREEN","LocalStorageController","metakey","current","key","id","entity","predicate","prevValue","newValue","entities","index","newIndex","newEntities","e","blobStorage","getPathString","cfg","path","generator","animationPaths","handleSVGGroup","blobConfig","blobSVGString","svg","group","offsetX","offsetY","currentX","currentY","move","event","x","y","fieldset","generateBlob","config","blob","generateBlobs","blobConfigs","bgColor","screen","handleExportSVG","loadSVGButton","copyAsTextButton","svgString","base64","svg64","url","a","generateNewBlobConfig","seed","handlerCash","removeBlob","onFieldsetDrop","draggedId","_a","draggedBlob","targetBlob","getFieldSetId","setMouseOver","currentFieldsetCash","_","setDragNDropHandlers","setFieldsetAttrs","setRemoveButton","removeButton","getFieldset","animation","DEFAULT_FROM_ELEMENTS_AMOUNT","updateBlob","target","type","updatedBlob","formHandler","form","addBlobButton","updateView","blobs","fieldsets","el","currentIndex","newBlobConfig","handleBGColorChange","colorInput"],"mappings":"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"}